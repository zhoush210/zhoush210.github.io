---
layout: post
title:  "C++ Primer 笔记"
subtitle: "第5版 C++11"
date:   2023-1-14 16:21:00 +0800
author:     "ZhouSh"
header-img: "img/in_post/Cpp-Primer/head.png"
header-mask: 0.2
tags:
    - C++
---
## 一、开始

main函数的返回类型必须为int。在大多数系统中，main的返回值被用来指示状态。返回0表示成功，非0的含义由系统定义，通常用来指出错误类型。

**endl**是一个被称为操纵符的特殊值。写入endl的效果是结束当前行，并将与设备关联的缓冲区（buffer）中的内容刷到设备中。缓冲刷新操作可以保证到目前为止程序所产生的所有输出都真正写入输出流中，而不是仅停留在内存中等待写入流。**程序员常常在调试时添加打印语句。这类语句应该保证“一直”刷新流。**否则，如果程序崩溃，输出可能还留在缓冲区中，从而导致关于程序崩溃位置的错误推断。
> 调试时打印语句都要增加endl。

虽然编译器会忽略注释，但读者并不会。即使系统文档的其他部分已经过时，程序员也倾向于相信注释的内容是正确可信的。因此，错误的注释比完全没有注释更糟糕，因为它会误导读者。因此，当你修改代码时，不要忘记同时更新注释！

在Windows系统中，输入**文件结束符**的方法是敲Ctrl+Z（按住Ctrl键的同时按Z键），然后按Enter或Return键。在UNIX系统中，文件结束符输入是用Ctrl+D。

**include**来自标准库的头文件时，也应该用尖括号（<>）包围头文件名。对于不属于标准库的头文件，则用双引号（" "）包围。

## 二、变量和基本类型

C++标准规定的算术类型的尺寸的最小值，同时允许编译器赋予这些类型更大的尺寸。C++语言规定一个int至少和一个short一样大，一个long至少和一个int一样大，一个long long至少和一个long一样大。其中，数据类型long long是在C++11中新定义的。
<img src="/img/in_post/Cpp-Primer/1.png" width="80%">

建议：如何选择类型
1. 使用int执行整数运算。在实际应用中，short常常显得太小而long一般和int有一样的尺寸。如果你的数值超过了int的表示范围，选用long long。
2. 执行浮点数运算选用double。这是因为float通常精度不够而且双精度浮点数和单精度浮点数的计算代价相差无几。事实上，对于某些机器来说，双精度运算甚至比单精度还快。

**初始化**不是赋值，初始化的含义是创建变量时赋予其一个初始值，而赋值的含义是把对象的当前值擦除，而以一个新值来替代。

为了支持分离式编译，C++语言将声明和定义区分开来。**声明**（declaration）使得名字为程序所知，一个文件如果想使用别处定义的名字则必须包含对那个名字的声明。而**定义**（definition）负责创建与名字关联的实体。

如果想声明一个变量而非定义它，就在变量名前添加关键字extern，而且不要显式地初始化变量。任何包含了显式初始化的声明即成为定义。在函数体内部，如果试图初始化一个由extern关键字标记的变量，将引发错误。
```
extern int i; // 声明而非定义
int i; // 声明并定义
extern int i=0; // 定义
```

变量能且只能被定义一次，但是可以被多次声明。声明和定义的区别看起来也许微不足道，但实际上却非常重要。如果要在多个文件中使用同一个变量，就必须将声明和定义分离。此时，变量的定义必须出现在且只能出现在一个文件中，而其他用到该变量的文件必须对其进行声明，却绝对不能重复定义。

用户自定义的标识符中不能连续出现两个下划线，也不能以下划线紧连大写字母开头。此外，定义在函数体外的标识符不能以下划线开头。

C++11中新增了一种引用：所谓的“右值引用（rvalue reference）”，后面介绍，这种引用主要用于内置类。严格来说，当我们使用术语“引用（reference）”时，指的其实是“左值引用（lvalue reference）”。引用即别名，必须初始化。

因为**const**对象一旦创建后其值就不能再改变，所以const对象必须初始化。